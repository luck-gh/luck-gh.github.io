{"title":"02.1_环境搭建","slug":"ARM/02.1_环境搭建","date":"2018-02-03T05:35:42.000Z","updated":"2018-10-21T14:05:05.193Z","comments":true,"path":"api/articles/ARM/02.1_环境搭建.json","photos":[],"link":"","excerpt":"1 烧写bootloader到SD卡 √<br>2 烧写bootloader到EMMC √<br>3 开发环境的搭建 √","covers":null,"content":"<p><strong>1 烧写bootloader到SD卡</strong> √<br><strong>2 烧写bootloader到EMMC</strong> √<br><strong>3 开发环境的搭建</strong> √</p>\n<a id=\"more\"></a>\n<hr>\n<h1 id=\"一-安装交叉编译工具\"><a href=\"#一-安装交叉编译工具\" class=\"headerlink\" title=\"一.安装交叉编译工具\"></a>一.安装交叉编译工具</h1><ul>\n<li>我将其放在了<code>tools/Linux</code>中，名为<code>arm-linux-gcc-4.5.1-v6-vfp-20120301.tgz</code></li>\n<li><code>tgz</code>为<code>gzip</code>压缩算法压缩（<code>file</code>命令查看）</li>\n<li><p>解压</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]#sudo tar -zxvf arm-linux-gcc-4.5.1-v6-vfp-20120301.tgz -C /</span><br><span class=\"line\">--------------</span><br><span class=\"line\"><span class=\"meta\">#</span>解压到了/opt中</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置环境变量（$PATH）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>将如下路径加入 ~/.bashrc</span><br><span class=\"line\">export PATH=/opt/FriendlyARM/toolschain/4.5.1/bin:$PATH</span><br><span class=\"line\"></span><br><span class=\"line\">[root@xxxx~]#source .bashrc</span><br><span class=\"line\">[root@xxxx~]#arm-linux-gcc-v</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>Redhead</code>64位系统上安装的32位交叉编译工具需要安装库才可以用，安装如下:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]yum install zlib</span><br><span class=\"line\">[root@xxxx~]yum whatprovides libz.so.1</span><br><span class=\"line\">[root@xxxx~]yum install libz.so.1</span><br><span class=\"line\">[root@xxxx~]yum install lib32z1</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"二-1-安装串口终端–ckermit\"><a href=\"#二-1-安装串口终端–ckermit\" class=\"headerlink\" title=\"二.1.安装串口终端–ckermit\"></a>二.1.安装串口终端–ckermit</h1><ul>\n<li><p>安装以及检验（插上串口线）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]sudo apt-get install ckermit</span><br><span class=\"line\">[root@xxxx~]ls /dev/ttyUSB0</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动前写一个配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]sudo vim ~/.kermrc</span><br><span class=\"line\"><span class=\"meta\">#</span>set line           /dev/ttyUSB0    //串口号</span><br><span class=\"line\"><span class=\"meta\">#</span>set speed          115200          //波特率</span><br><span class=\"line\"><span class=\"meta\">#</span>set carrier-watch  off</span><br><span class=\"line\"><span class=\"meta\">#</span>set handshake      none</span><br><span class=\"line\"><span class=\"meta\">#</span>set flow-control   none</span><br><span class=\"line\"><span class=\"meta\">#</span>robust</span><br><span class=\"line\"><span class=\"meta\">#</span>set file type      bin</span><br><span class=\"line\"><span class=\"meta\">#</span>set file name      lit</span><br><span class=\"line\"><span class=\"meta\">#</span>set rec pack       1000</span><br><span class=\"line\"><span class=\"meta\">#</span>set send pack      1000</span><br><span class=\"line\"><span class=\"meta\">#</span>set window         5</span><br><span class=\"line\">[root@xxxx~]sudo kermrc</span><br><span class=\"line\">(/srv/ftp/pub/UEA/) C-Kermit&gt;            //kermit命令行</span><br><span class=\"line\">(/srv/ftp/pub/UEA/) C-Kermit&gt;connect / c //读取数据</span><br><span class=\"line\"><span class=\"meta\">#</span>此时串口打印的是bootloader的数据形成bootloader命令行</span><br><span class=\"line\"><span class=\"meta\">#</span>收发模式时ctrl+/+c退出kermit串口收发模式</span><br><span class=\"line\"><span class=\"meta\">#</span>kermit命令行模式时quit退出</span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h1 id=\"二-2-安装串口终端–minicom\"><a href=\"#二-2-安装串口终端–minicom\" class=\"headerlink\" title=\"二.2.安装串口终端–minicom\"></a>二.2.安装串口终端–minicom</h1><ul>\n<li><p>配置<code>minicom</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]sudo minicom -s</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>Serial port setup --&gt; A --&gt; Save setup as dfl</code></p>\n</li>\n<li>退出配置界面进入串口收发界面（<code>ckermit</code>更稳定，但是<code>minicom</code>可以使用<code>ctrl+l</code>达到<code>clear</code>的目的）。</li>\n</ul>\n<hr>\n<h1 id=\"三-DNW-USB驱动\"><a href=\"#三-DNW-USB驱动\" class=\"headerlink\" title=\"三.DNW-USB驱动\"></a>三.DNW-USB驱动</h1><ul>\n<li>位置<code>tool32/dnw-9527.tar.gz</code></li>\n<li>解压后进入<code>dnw-linux</code></li>\n<li>目录介绍：<code>src/dnw</code>发送数据使用的工具、<code>src/driver</code>驱动。</li>\n<li>进入<code>src/dnw</code>进行<code>make</code>编译。并将其放入<code>/bin/</code></li>\n<li><p>进入<code>src/driver</code>进行<code>make</code>编译。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>Makefile有问题</span><br><span class=\"line\"><span class=\"meta\">#</span>进入并删除secbulk-m := secbulk.o</span><br><span class=\"line\"><span class=\"meta\">#</span>驱动是基于内核的，需要调用内核源代码，所以需要定义一个特殊变量指定pc内核源码路径</span><br><span class=\"line\">file: KERNEL := /lib/modules/`uname -r`/build  //因为内核版本不确定所以用变量，'`'为'~'键的同键字符</span><br><span class=\"line\">file: all:</span><br><span class=\"line\">file:     make -C $(KERNEL) M=`pwd` modules</span><br><span class=\"line\">file: clean:</span><br><span class=\"line\">file:     make -C $(KERNEL) M=`pwd` clean</span><br><span class=\"line\"><span class=\"meta\">#</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>然后<code>make</code>编译，需要<code>ko</code>文件</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"三-烧写bootloader到SD卡\"><a href=\"#三-烧写bootloader到SD卡\" class=\"headerlink\" title=\"三.烧写bootloader到SD卡\"></a>三.烧写bootloader到SD卡</h1><ul>\n<li>烧写bootloader到sd卡，下载内核到板子内存，利用nfs服务挂载pc端开发板的文件系统 </li>\n<li>三星给的固定1G的虚拟地址：<code>DDR SDRAM : 1G → 0X40000000 ~ 80000000</code><h2 id=\"编译uboot并写入sd卡，以sd卡方式启动bootloader\"><a href=\"#编译uboot并写入sd卡，以sd卡方式启动bootloader\" class=\"headerlink\" title=\"编译uboot并写入sd卡，以sd卡方式启动bootloader\"></a>编译uboot并写入sd卡，以sd卡方式启动bootloader</h2></li>\n<li>解压uboot<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf uboot_tiny4412-20130729.tgz</span><br><span class=\"line\">cd uboot_tiny4412</span><br><span class=\"line\">vim include/configs/tiny4412.h</span><br><span class=\"line\">//一些关键配置需要了解</span><br><span class=\"line\">//UBOOT的运行内存基地址为：0x43e00000；</span><br><span class=\"line\">//KERNEL的启动内存基地址为：0x40008000；</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"网络配置，启动延时，默认启动命令和启动参数\"><a href=\"#网络配置，启动延时，默认启动命令和启动参数\" class=\"headerlink\" title=\"网络配置，启动延时，默认启动命令和启动参数\"></a>网络配置，启动延时，默认启动命令和启动参数</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_ETHADDR          00:40:5c:26:0a:5b</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_NETMASK          255.255.255.0</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_IPADDR           192.168.1.20</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_SERVERIP         192.168.1.186</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_GATEWAYIP        192.168.1.1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_BOOTDELAY        3</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_BOOTCOMMAND      <span class=\"meta-string\">\"dnw 40008000;bootm 40008000 41000000\"</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_BOOTARGS <span class=\"meta-string\">\"root=/dev/nfs nfsroot=192.168.1.186:/nfsroot ip=192.168.1.20 console=ttySAC0,115200 lcd=S70\"</span></span></span><br></pre></td></tr></table></figure>\n<h3 id=\"如果需要禁用MMU（内存管理单元，映射），请修改331行\"><a href=\"#如果需要禁用MMU（内存管理单元，映射），请修改331行\" class=\"headerlink\" title=\"如果需要禁用MMU（内存管理单元，映射），请修改331行\"></a>如果需要禁用MMU（内存管理单元，映射），请修改331行</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span>  CONFIG_ENABLE_MMU \t</span></span><br><span class=\"line\"><span class=\"comment\">//改为：</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> CONFIG_ENABLE_MMU</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"bootloader提示行的提示符\"><a href=\"#bootloader提示行的提示符\" class=\"headerlink\" title=\"bootloader提示行的提示符\"></a>bootloader提示行的提示符</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CONFIG_SYS_PROMPT   <span class=\"meta-string\">\"[millet9527] #\"</span></span></span><br></pre></td></tr></table></figure>\n<h3 id=\"编译工具的指定\"><a href=\"#编译工具的指定\" class=\"headerlink\" title=\"编译工具的指定\"></a>编译工具的指定</h3><ul>\n<li>进入Makefile<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">搜索 CROSS_COMPILE</span><br><span class=\"line\">CROSS_COMPILE ?= arm-linux-</span><br><span class=\"line\">CROSS_COMPILE变量在<span class=\"built_in\">config</span>.mk中应用</span><br><span class=\"line\">而<span class=\"built_in\">config</span>.mk被最顶层的Makefile包含</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"配置文件的生成与编译\"><a href=\"#配置文件的生成与编译\" class=\"headerlink\" title=\"配置文件的生成与编译\"></a>配置文件的生成与编译</h2><ul>\n<li><p>生成开发板所需要的变量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]make tiny4412_config</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编译bootloader</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]make</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"SD卡的初始化与bootloader烧写\"><a href=\"#SD卡的初始化与bootloader烧写\" class=\"headerlink\" title=\"SD卡的初始化与bootloader烧写\"></a>SD卡的初始化与bootloader烧写</h2><ul>\n<li><p>查看</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]sudo fdisk -l</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编译工具</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]cd uboot_tiny4412/sd_fuse/</span><br><span class=\"line\">[root@xxxx~]make</span><br><span class=\"line\">[root@xxxx~]cd tiny4412</span><br><span class=\"line\">[root@xxxx~]ls</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">四个文件为三星提供的非开源代码，与两个脚本文件，使用sd_fusing.sh往SD卡烧写bootloader的脚本</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>sd_fusing.sh</code>文件介绍</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxxx~]vim sd_fusing.sh</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">./sd_fusing.sh /dev/sdb(整个SD卡)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"keyword\">if</span>[ -Z <span class=\"variable\">$1</span> ]判断是不是文件  <span class=\"keyword\">if</span>[ -b <span class=\"variable\">$1</span> ]判断是不是块设备文件</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">BDEV_NAME=<span class=\"string\">'basename $1'</span>把带有‘/’字符串的最后一个‘/’之后的字符串提出来</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">BDEV_SIZE=<span class=\"string\">'cat /sys/block/$&#123;BDEV_NAME&#125;/size'</span>获取设备大小</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">E4412_UBOOT=../../u-boot.bin</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">MKBL2=../mkbl2</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"variable\">$&#123;MKBL2&#125;</span> <span class=\"variable\">$&#123;E4412_UBOOT&#125;</span> bl2.bin 14336把u-boot.bin的前14K取出来形成新的文件bl2.bin</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">63-66的四个变量为逻辑快（512b）的编号，将SD卡划分，用来放4个机器码</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">001-016 E4412_N.bl1.bin</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">017-049 bl2.bin</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">049-705 <span class=\"variable\">$&#123;E4412_UBOOT&#125;</span> //uboot.bin </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">705+    E4412_tzsw.bin</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">dd命令 iflag输入标记 oflag输出标记 of输出目标 seek偏移量</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>往SD卡烧写</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ./sd_fusing.sh /dev/sdb</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>烧写完成，将SD卡放在开发板上。</p>\n</li>\n</ul>\n<h2 id=\"烧写代码\"><a href=\"#烧写代码\" class=\"headerlink\" title=\"烧写代码\"></a>烧写代码</h2><ul>\n<li>使用串口工具与<code>bootloader</code>交互</li>\n<li>目的：将<code>emmc</code>分区并格式化。</li>\n<li>使用<code>ckermit</code>或者<code>minicom</code>，推荐使用<code>ckermit</code>。</li>\n<li><p>进入收发模式后读取到<code>bootloader</code>命令行。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> <span class=\"built_in\">help</span>         //命令解释</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>分区EMMC</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> fdisk        //分区</span></span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> mmc list     //查看mmc接口，专门用于链接emmc与SD卡</span></span><br><span class=\"line\">S3C_HSMMC2: 0</span><br><span class=\"line\"> S5P_MSHC4: 1</span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> mmcinfo 0   //查看设备0的信息，看其大小</span></span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> fdisk -c 0 num1 num2 num3  //将设备0分四个区，三个数字分别指定分区二三四的大小剩下的给分区一。</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>格式化EMMC</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> <span class=\"built_in\">help</span>         //因为不同格式对应不同的命令，建议<span class=\"built_in\">help</span>查询，格式化--format（ext3format ext2format fatformat）</span></span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> fatformat mmc 1:1 //格式化设备1的第一个分区为fat32格式</span></span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> ext3format mmc 1:2 //将emmc的第二到第四个分区格式化为exr3</span></span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> ext3format mmc 1:3</span></span><br><span class=\"line\"><span class=\"meta\">[xxxxx]#</span><span class=\"bash\"> ext3format mmc 1:4</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>准备给EMMC烧写<code>bootloader</code></p>\n</li>\n<li><p>确定四个文件的位置</p>\n<blockquote>\n<p>路径<code>uboot/uboot_tiny4412/sd_fuse/tiny4412</code><br>文件<code>bl2.bin</code>、<code>E4412_N.bl1.bin</code>、<code>E4412_tzsw.bin</code>、<code>../../u-boot.bin</code></p>\n</blockquote>\n</li>\n<li><p>板子上加上<code>minusb</code>准备发送数据，发送到内存，再通过<code>bootloader</code>从内存读数据写到<code>EMMC</code>。</p>\n</li>\n<li>需要<code>USB</code>驱动。</li>\n</ul>\n<h2 id=\"设置bootloader环境变量\"><a href=\"#设置bootloader环境变量\" class=\"headerlink\" title=\"设置bootloader环境变量\"></a>设置bootloader环境变量</h2><ul>\n<li>为后面以nfs服务挂载pc机端开发板的根文件系统做准备，检查bootloader环境变量。</li>\n</ul>\n<h2 id=\"编译内核\"><a href=\"#编译内核\" class=\"headerlink\" title=\"编译内核\"></a>编译内核</h2><h3 id=\"拷贝配置好的config文件\"><a href=\"#拷贝配置好的config文件\" class=\"headerlink\" title=\"拷贝配置好的config文件\"></a>拷贝配置好的config文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp    millet4412_linux_defconfig    .config</span><br></pre></td></tr></table></figure>\n<h3 id=\"编译驱动并去掉看门狗驱动\"><a href=\"#编译驱动并去掉看门狗驱动\" class=\"headerlink\" title=\"编译驱动并去掉看门狗驱动\"></a>编译驱动并去掉看门狗驱动</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make menuconfig</span><br><span class=\"line\">-------------------</span><br><span class=\"line\">[ ] Support TrustZone-enabled Trusted Execution Environment    </span><br><span class=\"line\">注意这个一定要去掉，否则内核启动不起来。</span><br></pre></td></tr></table></figure>\n<h3 id=\"编译内核-1\"><a href=\"#编译内核-1\" class=\"headerlink\" title=\"编译内核\"></a>编译内核</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make -j2 zImage</span><br><span class=\"line\">//双线程全速编译</span><br></pre></td></tr></table></figure>\n<h2 id=\"pc机端准备根文件系统\"><a href=\"#pc机端准备根文件系统\" class=\"headerlink\" title=\"pc机端准备根文件系统\"></a>pc机端准备根文件系统</h2><h3 id=\"解压目标文件\"><a href=\"#解压目标文件\" class=\"headerlink\" title=\"解压目标文件\"></a>解压目标文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf rootfs_qtopia_qt4-20140124.tar.gz </span><br><span class=\"line\">mv   rootfs_qtopia_qt4   /nfsroot</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加文件-必须的\"><a href=\"#添加文件-必须的\" class=\"headerlink\" title=\"添加文件  必须的\"></a>添加文件  必须的</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /nfsroot/etc/inittab </span><br><span class=\"line\">----------------------</span><br><span class=\"line\">::sysinit:/etc/init.d/rcS</span><br><span class=\"line\">ttySAC0::askfirst:-/bin/sh</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">/bin/sh前面的-表示sh会默认加载/etc/profile</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置nfs服务\"><a href=\"#配置nfs服务\" class=\"headerlink\" title=\"配置nfs服务\"></a>配置nfs服务</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/exports/nfsroot *(rw,sync,no_root_squash)</span><br></pre></td></tr></table></figure>\n<h2 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h2><p>开发板端：<br><figure class=\"highlight dns\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dnw <span class=\"number\">40008000</span></span><br></pre></td></tr></table></figure></p>\n<p>PC机端：<br><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dnw <span class=\"keyword\">arch</span>/arm/<span class=\"keyword\">boot</span>/zImage</span><br></pre></td></tr></table></figure></p>\n<p>开发板端：<br><figure class=\"highlight dns\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bootm <span class=\"number\">40008000</span> <span class=\"number\">41000000</span></span><br></pre></td></tr></table></figure></p>\n<p>注意观察pc机端的网络连接选成和开发板一个网段。</p>\n<hr>\n<h1 id=\"四-烧写bootloader到emmc\"><a href=\"#四-烧写bootloader到emmc\" class=\"headerlink\" title=\"四. 烧写bootloader到emmc\"></a>四. 烧写bootloader到emmc</h1><ul>\n<li>烧写bootloader，内核，文件系统到emmc<h2 id=\"烧写bootloader到emmc\"><a href=\"#烧写bootloader到emmc\" class=\"headerlink\" title=\"烧写bootloader到emmc\"></a>烧写bootloader到emmc</h2></li>\n<li><p>以sd卡方式启动bootloader</p>\n<h3 id=\"对emmc进行分区\"><a href=\"#对emmc进行分区\" class=\"headerlink\" title=\"对emmc进行分区\"></a>对emmc进行分区</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> mmc list</span></span><br><span class=\"line\">S3C_HSMMC2: 0</span><br><span class=\"line\">S5P_MSHC4: 1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> mmcinfo 0</span></span><br><span class=\"line\">Device: S3C_HSMMC2</span><br><span class=\"line\">Manufacturer ID: 27</span><br><span class=\"line\">OEM: 5048</span><br><span class=\"line\">Name: SD8GB </span><br><span class=\"line\">Tran Speed: 0</span><br><span class=\"line\">Rd Block Len: 512</span><br><span class=\"line\">SD version 2.0</span><br><span class=\"line\">High Capacity: Yes</span><br><span class=\"line\">Size: 7600MB (block: 15564800)</span><br><span class=\"line\">Bus Width: 4-bit</span><br><span class=\"line\">Boot Partition Size: 0 KB</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> mmcinfo 1</span></span><br><span class=\"line\">Device: S5P_MSHC4</span><br><span class=\"line\">Manufacturer ID: 15</span><br><span class=\"line\">OEM: 100</span><br><span class=\"line\">Name: M4G1Y </span><br><span class=\"line\">Tran Speed: 0</span><br><span class=\"line\">Rd Block Len: 512</span><br><span class=\"line\">MMC version 4.0</span><br><span class=\"line\">High Capacity: Yes</span><br><span class=\"line\">Size: 3728MB (block: 7634944)</span><br><span class=\"line\">Bus Width: 8-bit</span><br><span class=\"line\">Boot Partition Size: 2048 KB</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> fdisk -p 0</span></span><br><span class=\"line\">partion #    size(MB)     block start #    block count    partition_Id </span><br><span class=\"line\">   1          7454           289788        15267252          0x83 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> fdisk -p 1</span></span><br><span class=\"line\">partion #    size(MB)     block start #    block count    partition_Id </span><br><span class=\"line\">   \t1          3594           134244         7361046          0x83</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>根据以上信息，对设备1进行分区</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> fdisk -c 1 320 2057 520</span></span><br><span class=\"line\">Count: 10000</span><br><span class=\"line\">fdisk is completed</span><br><span class=\"line\"></span><br><span class=\"line\">partion #    size(MB)     block start #    block count    partition_Id </span><br><span class=\"line\">\t   1           695          6070812         1424478          0x0C </span><br><span class=\"line\">\t   2           320           134244          656304          0x83 </span><br><span class=\"line\">\t   3          2057           790548         4213770          0x83 </span><br><span class=\"line\">\t   4           520          5004318         1066494          0x83</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"对4个分区进行格式化\"><a href=\"#对4个分区进行格式化\" class=\"headerlink\" title=\"对4个分区进行格式化\"></a>对4个分区进行格式化</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> fatformat  mmc 1:1</span></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> ext3format mmc 1:2</span></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> ext3format mmc 1:3</span></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> ext3format mmc 1:4</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"打开emmc设备，emmc的设备号为1-并烧写bootloade\"><a href=\"#打开emmc设备，emmc的设备号为1-并烧写bootloade\" class=\"headerlink\" title=\"打开emmc设备，emmc的设备号为1;并烧写bootloade\"></a>打开emmc设备，emmc的设备号为1;并烧写bootloade</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> emmc open 1</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> dnw 40000000</span></span><br><span class=\"line\">[root@localhost tiny4412]# dnw E4412_N.bl1.bin </span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> mmc write 1 40000000 0x0 0x10</span></span><br><span class=\"line\">\t\t\t\t\t</span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> dnw 40000000</span></span><br><span class=\"line\">[root@localhost tiny4412]# dnw bl2.bin </span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> mmc write 1 40000000 0x10 0x20</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> dnw 40000000</span></span><br><span class=\"line\">[root@localhost tiny4412]# dnw ../../u-boot.bin </span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> mmc write 1 40000000 0x30 0x290</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> dnw 40000000</span></span><br><span class=\"line\">[root@localhost tiny4412]# dnw E4412_tzsw.bin </span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> mmc write 1 40000000 0x2c0 0xb8</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"关闭emmc设备\"><a href=\"#关闭emmc设备\" class=\"headerlink\" title=\"关闭emmc设备\"></a>关闭emmc设备</h3><ul>\n<li>关闭emmc设备，emmc的设备号为1；以emmc方式启动查看bootloader启动是否成功<h3 id=\"烧写zImage到emmc的第二个分区\"><a href=\"#烧写zImage到emmc的第二个分区\" class=\"headerlink\" title=\"烧写zImage到emmc的第二个分区\"></a>烧写zImage到emmc的第二个分区</h3></li>\n<li><p>设置bootloader的启动参数，让内核启动后自动挂载笔记本端开发板的文件系统：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"></span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@FriendlyARM /]# ls /dev/mmcblk0p*</span><br><span class=\"line\">/dev/mmcblk0p1  /dev/mmcblk0p2  /dev/mmcblk0p3  /dev/mmcblk0p4</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>烧内核</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@FriendlyARM /]# mount /dev/mmcblk0p2 /mnt</span><br><span class=\"line\">[root@FriendlyARM /]# cp zImage /mnt</span><br><span class=\"line\">[root@FriendlyARM /]# umount /mnt/</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"解压rootfs到emmc的第三个分区\"><a href=\"#解压rootfs到emmc的第三个分区\" class=\"headerlink\" title=\"解压rootfs到emmc的第三个分区\"></a>解压rootfs到emmc的第三个分区</h3><ul>\n<li><p>烧文件系统</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@FriendlyARM /]# mount /dev/mmcblk0p3 /mnt</span><br><span class=\"line\">[root@FriendlyARM /]# tar -zxvf rootfs_qtopia_qt4.tar.gz -C /mnt </span><br><span class=\"line\">[root@FriendlyARM /]# cd /mnt/</span><br><span class=\"line\">[root@FriendlyARM /mnt]# mv rootfs_qtopia_qt4/* .</span><br><span class=\"line\">[root@FriendlyARM /mnt]# rm -rf rootfs_qtopia_qt4/</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@FriendlyARM /]# vi  /mnt/etc/inittab</span><br><span class=\"line\">-------------------------------------------</span><br><span class=\"line\">::sysinit:/etc/init.d/rcS</span><br><span class=\"line\">ttySAC0::askfirst:-/bin/sh</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"测试写入的zImage和rootfs是否成功\"><a href=\"#测试写入的zImage和rootfs是否成功\" class=\"headerlink\" title=\"测试写入的zImage和rootfs是否成功\"></a>测试写入的zImage和rootfs是否成功</h3><ul>\n<li><p>查看emmc的第二分区是否有zImage</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> ext2ls mmc 0:2</span></span><br><span class=\"line\">&lt;DIR&gt;       4096 .</span><br><span class=\"line\">&lt;DIR&gt;       4096 ..</span><br><span class=\"line\">&lt;DIR&gt;      16384 lost+found</span><br><span class=\"line\">         4929696 zImage</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>测试zImage是否可以成功读取到内存并成功引导</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> ext2load mmc 0:2 40008000 zImage</span></span><br><span class=\"line\">Loading file \"zImage\" from mmc device 0:2 (xxa2)</span><br><span class=\"line\">4929696 bytes read</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> bootm 40008000</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>内核成功引导后，设置环境变量实现自启动内核</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> <span class=\"built_in\">set</span> bootcmd <span class=\"string\">\"ext2load mmc 0:2 40008000 zImage;bootm 40008000\"</span></span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>设置启动参数环境变量，让内核启动后挂载emmc第三个分区的根文件系统</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">[millet@9527]#</span><span class=\"bash\"> <span class=\"built_in\">set</span> bootargs <span class=\"string\">\"bootargs=console=ttySAC0,115200 root=/dev/mmcblk0p3 lcd=S70 ctp=2\"</span></span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>到此，以emmc方式启动就可以成功启动linux系统。</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"五-开发环境的搭建\"><a href=\"#五-开发环境的搭建\" class=\"headerlink\" title=\"五.开发环境的搭建\"></a>五.开发环境的搭建</h1><h2 id=\"主机PC机上的数据如何传给开发板\"><a href=\"#主机PC机上的数据如何传给开发板\" class=\"headerlink\" title=\"主机PC机上的数据如何传给开发板\"></a>主机PC机上的数据如何传给开发板</h2><h3 id=\"通过ftp\"><a href=\"#通过ftp\" class=\"headerlink\" title=\"通过ftp\"></a>通过ftp</h3><ul>\n<li><p>在板子上先修改root的密码:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">passwd</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">xxxxxx</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">xxxxxx</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在主机上执行:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ftp 192.168.1.230 </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> root</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> xxxxxx</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> bin</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> put a.out</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"开发板挂载主机的某个目录\"><a href=\"#开发板挂载主机的某个目录\" class=\"headerlink\" title=\"开发板挂载主机的某个目录\"></a>开发板挂载主机的某个目录</h3><ul>\n<li><p>@主机端配置要给开发板通过nfs服务挂载的目录服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">vim /etc/exports</span></span><br><span class=\"line\">-------------------</span><br><span class=\"line\">/rootfs  *(rw,sync,no_root_squash)</span><br><span class=\"line\">-------------------</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">service nfs restart</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>@开发板上烧的是linux系统的前提下在开发板的，命令行执行:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">mount -t nfs -o nolock,rw 192.168.1.186:/rootfs   /mnt/</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>那么开发板的命令行进入到/mnt/目录下就是在访问主机的/rootfs目录，实现了主机数据给开发板共享。</p>\n</li>\n</ul>\n<h3 id=\"利用scp远程拷贝\"><a href=\"#利用scp远程拷贝\" class=\"headerlink\" title=\"利用scp远程拷贝\"></a>利用scp远程拷贝</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">scp  a.out  192.168.1.171:/</span></span><br></pre></td></tr></table></figure>\n","categories":[{"name":"嵌入式","slug":"嵌入式","count":3,"path":"api/categories/嵌入式.json"}],"tags":[{"name":"ARM 裸板开发","slug":"ARM-裸板开发","count":2,"path":"api/tags/ARM-裸板开发.json"}]}